{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/ermuhan/Developer/NextJs/ai-course-generation/app/api/ai-assistant/route.ts"],"sourcesContent":["import { Groq } from \"groq-sdk\";\n\nconst groq = new Groq({\n  apiKey: process.env.GROQ_API_KEY!,\n});\n\nexport async function POST(req: Request) {\n  try {\n    const body = await req.json();\n    const { question, topic, course, context } = body;\n\n    // ðŸ”¹ Prompt tayyorlash\n    const prompt = `\nSen til o'rganish assistantisan. Foydalanuvchi ${\n      course.targetLanguage\n    } tilini o'rganmoqda (${course.level} daraja).\n\nHOZIRGI MAVZU: ${topic.title}\nMAVZU TAVSIFI: ${topic.description}\n\n${context ? `MAVZU KONTENTI:\\n${context}\\n` : \"\"}\n\nFOYDALANUVCHI SAVOLI: ${question}\n\nQisqa, aniq va foydali javob ber.\nAgar so'ralsa, qo'shimcha misollar keltir.\nJavobni o'zbek tilida ber, lekin o'rganilayotgan til misollarini ${\n      course.targetLanguage\n    } tilida yoz.\n`.trim();\n\n    // ðŸ”¹ Groq API ga soâ€˜rov\n    const completion = await groq.chat.completions.create({\n      model: \"llama-3.3-70b-versatile\",\n      messages: [\n        {\n          role: \"system\",\n          content: `Siz foydalanuvchiga til o'rganishda yordam beradigan professional assistantisiz. Javoblarni faqat O'zbek tilida, misollarni esa ${course.targetLanguage} tilida yozing.`,\n        },\n        { role: \"user\", content: prompt },\n      ],\n      max_tokens: 800,\n      temperature: 0.6, // kamroq kreativlik, tilni oâ€˜zgartirmasligi uchun\n    });\n\n    // ðŸ”¹ Javobni olish\n    const text = completion.choices[0]?.message?.content || \"Javob topilmadi\";\n\n    return new Response(text, {\n      headers: { \"Content-Type\": \"text/plain\" },\n    });\n  } catch (err) {\n    console.error(\"AI Error:\", err);\n    return new Response(\"Server error\", { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,OAAO,IAAI,wNAAI,CAAC;IACpB,QAAQ,QAAQ,GAAG,CAAC,YAAY;AAClC;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG;QAE7C,uBAAuB;QACvB,MAAM,SAAS,CAAC;+CAC2B,EACzC,OAAO,cAAc,CACtB,qBAAqB,EAAE,OAAO,KAAK,CAAC;;eAE1B,EAAE,MAAM,KAAK,CAAC;eACd,EAAE,MAAM,WAAW,CAAC;;AAEnC,EAAE,UAAU,CAAC,iBAAiB,EAAE,QAAQ,EAAE,CAAC,GAAG,GAAG;;sBAE3B,EAAE,SAAS;;;;iEAIgC,EAC3D,OAAO,cAAc,CACtB;AACL,CAAC,CAAC,IAAI;QAEF,wBAAwB;QACxB,MAAM,aAAa,MAAM,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACpD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SAAS,CAAC,gIAAgI,EAAE,OAAO,cAAc,CAAC,eAAe,CAAC;gBACpL;gBACA;oBAAE,MAAM;oBAAQ,SAAS;gBAAO;aACjC;YACD,YAAY;YACZ,aAAa;QACf;QAEA,mBAAmB;QACnB,MAAM,OAAO,WAAW,OAAO,CAAC,EAAE,EAAE,SAAS,WAAW;QAExD,OAAO,IAAI,SAAS,MAAM;YACxB,SAAS;gBAAE,gBAAgB;YAAa;QAC1C;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,aAAa;QAC3B,OAAO,IAAI,SAAS,gBAAgB;YAAE,QAAQ;QAAI;IACpD;AACF"}}]
}