{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/ermuhan/Developer/NextJs/ai-course-generation/app/api/generate-roadmap/route.ts"],"sourcesContent":["import { streamText } from \"ai\"\n\nexport async function POST(request: Request) {\n  const { course, userProfile } = await request.json()\n\n  // Calculate module count based on daily time and level\n  const moduleCount = getModuleCount(course.level, course.dailyTime)\n  const topicsPerModule = getTopicsPerModule(course.dailyTime)\n\n  const prompt = `Sen professional til o'rgatuvchi AI assistantsan. Quyidagi ma'lumotlar asosida til o'rganish yo'l xaritasini yarat.\n\nFOYDALANUVCHI MA'LUMOTLARI:\n- Ismi: ${userProfile.fullName}\n- Kasbi: ${userProfile.profession}\n- Sohasi: ${userProfile.field}\n- Qiziqishlari: ${userProfile.interests.join(\", \")}\n\nKURS MA'LUMOTLARI:\n- O'rganilayotgan til: ${course.targetLanguage}\n- Daraja: ${course.level}\n- Kunlik vaqt: ${course.dailyTime} daqiqa\n- Mavzu qiziqishlari: ${course.interests.join(\", \")}\n\nTALABLAR:\n1. ${moduleCount} ta modul yarat\n2. Har bir modulda ${topicsPerModule} ta mavzu bo'lsin\n3. Mavzular foydalanuvchining kasbiga (${userProfile.profession}) va qiziqishlariga mos misollar bilan bo'lsin\n4. ${course.level} darajasiga mos qiyinchilikda bo'lsin\n5. Modullar ketma-ket o'sib boruvchi qiyinchilikda bo'lsin\n\nMUHIM: Faqat quyidagi JSON formatida javob ber, boshqa hech narsa yozma:\n\n{\n  \"modules\": [\n    {\n      \"title\": \"Modul nomi\",\n      \"description\": \"Qisqa tavsif\",\n      \"topics\": [\n        {\n          \"title\": \"Mavzu nomi\",\n          \"description\": \"Mavzu tavsifi\"\n        }\n      ]\n    }\n  ]\n}\n\nJSON:`\n\n  const result = streamText({\n    model: \"openai/gpt-4o-mini\",\n    prompt,\n    maxTokens: 4000,\n  })\n\n  return result.toTextStreamResponse()\n}\n\nfunction getModuleCount(level: string, dailyTime: number): number {\n  const baseModules: Record<string, number> = {\n    A1: 4,\n    A2: 5,\n    B1: 6,\n    B2: 6,\n    C1: 5,\n    C2: 4,\n  }\n\n  const base = baseModules[level] || 5\n\n  // Adjust based on daily time\n  if (dailyTime >= 120) return Math.min(base + 2, 8)\n  if (dailyTime >= 60) return base + 1\n  if (dailyTime <= 30) return Math.max(base - 1, 3)\n\n  return base\n}\n\nfunction getTopicsPerModule(dailyTime: number): number {\n  if (dailyTime >= 120) return 7\n  if (dailyTime >= 60) return 6\n  if (dailyTime >= 45) return 5\n  return 4\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,QAAQ,IAAI;IAElD,uDAAuD;IACvD,MAAM,cAAc,eAAe,OAAO,KAAK,EAAE,OAAO,SAAS;IACjE,MAAM,kBAAkB,mBAAmB,OAAO,SAAS;IAE3D,MAAM,SAAS,CAAC;;;QAGV,EAAE,YAAY,QAAQ,CAAC;SACtB,EAAE,YAAY,UAAU,CAAC;UACxB,EAAE,YAAY,KAAK,CAAC;gBACd,EAAE,YAAY,SAAS,CAAC,IAAI,CAAC,MAAM;;;uBAG5B,EAAE,OAAO,cAAc,CAAC;UACrC,EAAE,OAAO,KAAK,CAAC;eACV,EAAE,OAAO,SAAS,CAAC;sBACZ,EAAE,OAAO,SAAS,CAAC,IAAI,CAAC,MAAM;;;GAGjD,EAAE,YAAY;mBACE,EAAE,gBAAgB;uCACE,EAAE,YAAY,UAAU,CAAC;GAC7D,EAAE,OAAO,KAAK,CAAC;;;;;;;;;;;;;;;;;;;;KAoBb,CAAC;IAEJ,MAAM,SAAS,IAAA,0OAAU,EAAC;QACxB,OAAO;QACP;QACA,WAAW;IACb;IAEA,OAAO,OAAO,oBAAoB;AACpC;AAEA,SAAS,eAAe,KAAa,EAAE,SAAiB;IACtD,MAAM,cAAsC;QAC1C,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,MAAM,OAAO,WAAW,CAAC,MAAM,IAAI;IAEnC,6BAA6B;IAC7B,IAAI,aAAa,KAAK,OAAO,KAAK,GAAG,CAAC,OAAO,GAAG;IAChD,IAAI,aAAa,IAAI,OAAO,OAAO;IACnC,IAAI,aAAa,IAAI,OAAO,KAAK,GAAG,CAAC,OAAO,GAAG;IAE/C,OAAO;AACT;AAEA,SAAS,mBAAmB,SAAiB;IAC3C,IAAI,aAAa,KAAK,OAAO;IAC7B,IAAI,aAAa,IAAI,OAAO;IAC5B,IAAI,aAAa,IAAI,OAAO;IAC5B,OAAO;AACT"}}]
}